# TeslaDesk — Agent ガイド

このファイルは Cursor のエージェント（Plan / Agent など）がタスク範囲と進め方を判断するためのガイドです。

## プロジェクトの目的とスコープ

**TeslaDesk** は Tesla API の上に構築された vehicle intelligence platform です。車両状態の一元管理、コマンド実行、行動の自動化を、ローカルな統合コントロールシステムに集約します。

**ロングタームのビジョン**

- スマートルーティン（例: カレンダー・天気に基づくプリコンディショニング）
- エネルギー分析
- 走行行動のインサイト
- コスト最適化のトラッキング
- ホームオートメーションとの連携

**方向性**: プログラム可能な「車両の脳」へと進化させる。

## 主なタスクの種類

- 新機能の実装
- バグ修正
- リファクタリング
- テストの追加・修正
- ドキュメント・設定の更新

## 作業の進め方

1. **解析**: コード変更後は必ず `mise exec -- flutter analyze` を実行し、**警告が 0 件**であることを確認してからコミットする。Flutter コマンドは常に `mise exec -- flutter` で実行する。
2. **コミットメッセージ**: Conventional Commits に従う（型・スコープ・タイトル。複数変更は可能な限り複数コミットに分ける）。

### コミット方針（必須）

**必ず適切なタイミングと適切な単位でコミットする。**

- **適切なタイミング**: 論理的にひと区切りついたとき（1 機能実装完了、1 バグ修正完了、`mise exec -- flutter analyze` 通過後など）。長時間の変更をため込まず、作業の区切りごとにコミットする。
- **適切な単位**: 1 コミット = 1 つの論理的な変更。複数の機能・複数の修正・無関係な変更を 1 コミットにまとめない。複数の変更は可能な限り複数コミットに分ける。

## 重要なファイル・ディレクトリ

| パス | 説明 |
|------|------|
| `lib/main.dart` | アプリのエントリとルートウィジェット |
| `pubspec.yaml` | 依存関係・Flutter 設定 |
| `analysis_options.yaml` | Dart 解析・リント設定 |
| `test/` | 単体・ウィジェットテスト |

## テスト

- テストは `test/` に配置する。
- 実行: `mise exec -- flutter test`
- 変更に応じてテストを追加・更新する方針とする。
